### ==============================================
### WOCHE 6 - FILE UPLOAD TESTS
### ==============================================
### Test: Multer File Upload Middleware
### Endpoint: POST /api/test/upload
### ==============================================

@baseUrl = http://localhost:5000
@testFile = ./test-program.nc

### ==============================================
### 1. TEST: Einfacher File Upload (.nc)
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="test-program.nc"
Content-Type: text/plain

< ./test-program.nc
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 2. TEST: Upload ohne Datei (Error)
### Erwartung: 400 - Keine Datei hochgeladen
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="somethingelse"

test
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 3. TEST: Upload mit falschem Dateityp (.pdf)
### Erwartung: 400 - Dateityp nicht erlaubt
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="invalid.pdf"
Content-Type: application/pdf

This is not a valid NC program
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 4. TEST: Upload mit .mpf (Siemens)
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="SIEMENS_PROG.mpf"
Content-Type: text/plain

%_N_SIEMENS_MPF
N10 G54
N20 T1 M6
N30 S2000 M3
N40 G0 X0 Y0 Z100
N50 M30
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 5. TEST: Upload mit .h (Heidenhain)
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="HEIDENHAIN.h"
Content-Type: text/plain

BEGIN PGM HEIDENHAIN MM
BLK FORM 0.1 Z X+0 Y+0 Z-20
BLK FORM 0.2 X+100 Y+100 Z+0
TOOL CALL 1 Z S2000
L X+0 Y+0 Z+10 R0 F MAX
L Z-5 F100
END PGM HEIDENHAIN MM
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 6. TEST: Upload mit .eia
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="TEST.eia"
Content-Type: text/plain

%
O0001
G90 G54 G0 X0 Y0
M30
%
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### 7. TEST: Upload mit .txt
### ==============================================
POST {{baseUrl}}/api/test/upload
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="generic-program.txt"
Content-Type: text/plain

G90 G54
G0 X0 Y0 Z100
M30
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### ==============================================
### NOTES:
### ==============================================
### - Erlaubte Extensions: .nc, .mpf, .spf, .h, .eia, .txt, .cnc, .tap, .gcode, .fan, .min, .prg, .pim, .din, .iso
### - Max Dateigröße: 100 MB
### - Upload-Verzeichnis: /uploads/programs/
### - Multer speichert Dateien mit unique filename: timestamp-random-originalname
### ==============================================
